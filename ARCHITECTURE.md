# Authentication Flow Diagram

## ğŸ“Š System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USER INTERFACE                            â”‚
â”‚                     (React + Vite Frontend)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTP/HTTPS
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API GATEWAY                                 â”‚
â”‚                   (FastAPI Backend)                              â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Auth       â”‚  â”‚   Disputes   â”‚  â”‚  Dashboard   â”‚         â”‚
â”‚  â”‚   Routes     â”‚  â”‚   Routes     â”‚  â”‚   Routes     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚                     â”‚
        â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PostgreSQL  â”‚    â”‚   Firebase   â”‚    â”‚    Google    â”‚
â”‚   Database   â”‚    â”‚     Auth     â”‚    â”‚    OAuth     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Authentication Flow

### 1. Email/Password Registration

```
User                Frontend              Backend              Database
 â”‚                     â”‚                     â”‚                     â”‚
 â”‚  Fill Form          â”‚                     â”‚                     â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                     â”‚
 â”‚                     â”‚                     â”‚                     â”‚
 â”‚                     â”‚  POST /register     â”‚                     â”‚
 â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚
 â”‚                     â”‚                     â”‚                     â”‚
 â”‚                     â”‚                     â”‚  Check Email        â”‚
 â”‚                     â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                     â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚                     â”‚                     â”‚  Email Available    â”‚
 â”‚                     â”‚                     â”‚                     â”‚
 â”‚                     â”‚                     â”‚  Hash Password      â”‚
 â”‚                     â”‚                     â”‚  (bcrypt)           â”‚
 â”‚                     â”‚                     â”‚                     â”‚
 â”‚                     â”‚                     â”‚  Create User        â”‚
 â”‚                     â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                     â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚                     â”‚                     â”‚  User Created       â”‚
 â”‚                     â”‚                     â”‚                     â”‚
 â”‚                     â”‚                     â”‚  Generate JWT       â”‚
 â”‚                     â”‚                     â”‚                     â”‚
 â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚
 â”‚                     â”‚  {user, token}      â”‚                     â”‚
 â”‚                     â”‚                     â”‚                     â”‚
 â”‚  Redirect           â”‚  Store Token        â”‚                     â”‚
 â”‚  to Dashboard       â”‚  in localStorage    â”‚                     â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚                     â”‚
```

### 2. Email/Password Login

```
User                Frontend              Backend              Database
 â”‚                     â”‚                     â”‚                     â”‚
 â”‚  Enter Credentials  â”‚                     â”‚                     â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                     â”‚
 â”‚                     â”‚                     â”‚                     â”‚
 â”‚                     â”‚  POST /login/email  â”‚                     â”‚
 â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚
 â”‚                     â”‚                     â”‚                     â”‚
 â”‚                     â”‚                     â”‚  Find User          â”‚
 â”‚                     â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                     â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚                     â”‚                     â”‚  User Found         â”‚
 â”‚                     â”‚                     â”‚                     â”‚
 â”‚                     â”‚                     â”‚  Verify Password    â”‚
 â”‚                     â”‚                     â”‚  (bcrypt.verify)    â”‚
 â”‚                     â”‚                     â”‚                     â”‚
 â”‚                     â”‚                     â”‚  Generate JWT       â”‚
 â”‚                     â”‚                     â”‚                     â”‚
 â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚
 â”‚                     â”‚  {user, token}      â”‚                     â”‚
 â”‚                     â”‚                     â”‚                     â”‚
 â”‚  Redirect           â”‚  Store Token        â”‚                     â”‚
 â”‚  to Dashboard       â”‚  in localStorage    â”‚                     â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚                     â”‚
```

### 3. Google OAuth Flow (React OAuth)

```
User        Frontend        Google OAuth      Backend        Database
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚  Click       â”‚                â”‚               â”‚               â”‚
 â”‚  Google Btn  â”‚                â”‚               â”‚               â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                â”‚               â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚              â”‚  Open Popup    â”‚               â”‚               â”‚
 â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚  Select      â”‚                â”‚               â”‚               â”‚
 â”‚  Account     â”‚                â”‚               â”‚               â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚               â”‚
 â”‚              â”‚  ID Token      â”‚               â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚              â”‚  POST /google  â”‚               â”‚               â”‚
 â”‚              â”‚  {token}       â”‚               â”‚               â”‚
 â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚  Verify Token â”‚
 â”‚              â”‚                â”‚               â”‚  with Google  â”‚
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚  Get/Create   â”‚
 â”‚              â”‚                â”‚               â”‚  User         â”‚
 â”‚              â”‚                â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚              â”‚                â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚  Generate JWT â”‚
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
 â”‚              â”‚  {user, token} â”‚               â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚  Dashboard   â”‚  Store Token   â”‚               â”‚               â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚               â”‚               â”‚
```

### 4. Firebase Google Sign-in Flow

```
User        Frontend        Firebase Auth     Backend        Database
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚  Click       â”‚                â”‚               â”‚               â”‚
 â”‚  Firebase    â”‚                â”‚               â”‚               â”‚
 â”‚  Google Btn  â”‚                â”‚               â”‚               â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                â”‚               â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚              â”‚  signInWith    â”‚               â”‚               â”‚
 â”‚              â”‚  Popup()       â”‚               â”‚               â”‚
 â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚  Select      â”‚                â”‚               â”‚               â”‚
 â”‚  Account     â”‚                â”‚               â”‚               â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚               â”‚
 â”‚              â”‚  Firebase User â”‚               â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚              â”‚  getIdToken()  â”‚               â”‚               â”‚
 â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚               â”‚
 â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚               â”‚
 â”‚              â”‚  ID Token      â”‚               â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚              â”‚  POST /google  â”‚               â”‚               â”‚
 â”‚              â”‚  {token}       â”‚               â”‚               â”‚
 â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚  Verify &     â”‚
 â”‚              â”‚                â”‚               â”‚  Process      â”‚
 â”‚              â”‚                â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚              â”‚                â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
 â”‚              â”‚  {user, token} â”‚               â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚               â”‚
 â”‚  Dashboard   â”‚                â”‚               â”‚               â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚               â”‚               â”‚
```

### 5. Password Reset Flow

```
User        Frontend        Firebase Auth     User Email
 â”‚              â”‚                â”‚               â”‚
 â”‚  Click       â”‚                â”‚               â”‚
 â”‚  Forgot Pwd  â”‚                â”‚               â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚
 â”‚  Enter Email â”‚                â”‚               â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚
 â”‚              â”‚  sendPassword  â”‚               â”‚
 â”‚              â”‚  ResetEmail()  â”‚               â”‚
 â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚
 â”‚              â”‚                â”‚  Send Email   â”‚
 â”‚              â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚              â”‚                â”‚               â”‚
 â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
 â”‚              â”‚  Success       â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚
 â”‚  Success Msg â”‚                â”‚               â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚               â”‚
 â”‚              â”‚                â”‚               â”‚
 â”‚  Check Email â”‚                â”‚               â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚              â”‚                â”‚               â”‚
 â”‚  Click Link  â”‚                â”‚               â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚              â”‚                â”‚               â”‚
 â”‚  Reset Form  â”‚                â”‚               â”‚
 â”‚  (Firebase)  â”‚                â”‚               â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
```

## ğŸ”‘ JWT Token Structure

```json
{
  "header": {
    "alg": "HS256",
    "typ": "JWT"
  },
  "payload": {
    "sub": "user@example.com",
    "exp": 1738156800,
    "iat": 1737552000
  },
  "signature": "..."
}
```

## ğŸ›¡ï¸ Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 1: Frontend Validation                           â”‚
â”‚  - Email format check                                   â”‚
â”‚  - Password strength                                    â”‚
â”‚  - Required fields                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 2: Network Security                              â”‚
â”‚  - HTTPS (production)                                   â”‚
â”‚  - CORS configuration                                   â”‚
â”‚  - Rate limiting (recommended)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 3: Backend Validation                            â”‚
â”‚  - Pydantic schema validation                           â”‚
â”‚  - Input sanitization                                   â”‚
â”‚  - SQL injection prevention (ORM)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 4: Authentication                                â”‚
â”‚  - Password hashing (bcrypt)                            â”‚
â”‚  - JWT token verification                               â”‚
â”‚  - Google OAuth verification                            â”‚
â”‚  - Firebase token verification                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 5: Authorization                                 â”‚
â”‚  - User role checking                                   â”‚
â”‚  - Resource ownership verification                      â”‚
â”‚  - Protected route guards                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 6: Database Security                             â”‚
â”‚  - Encrypted connections                                â”‚
â”‚  - Prepared statements (ORM)                            â”‚
â”‚  - Access control                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“± State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AuthContext                           â”‚
â”‚                                                          â”‚
â”‚  State:                                                  â”‚
â”‚  â”œâ”€ user: User | null                                   â”‚
â”‚  â”œâ”€ loading: boolean                                    â”‚
â”‚  â””â”€ isAuthenticated: boolean                            â”‚
â”‚                                                          â”‚
â”‚  Methods:                                               â”‚
â”‚  â”œâ”€ login(credentials)                                  â”‚
â”‚  â”œâ”€ register(userData)                                  â”‚
â”‚  â”œâ”€ googleLogin(token)                                  â”‚
â”‚  â”œâ”€ googleSignInWithFirebase()                          â”‚
â”‚  â”œâ”€ resetPassword(email)                                â”‚
â”‚  â”œâ”€ sendVerificationEmail()                             â”‚
â”‚  â”œâ”€ logout()                                            â”‚
â”‚  â””â”€ updateUser(user)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ Provides
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚               â”‚
        â–¼               â–¼               â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Home  â”‚     â”‚  Login   â”‚    â”‚Dashboard â”‚
   â”‚  Page  â”‚     â”‚  Page    â”‚    â”‚  Page    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Request/Response Cycle

```
1. User Action (Click Login)
   â”‚
   â–¼
2. Frontend Validation
   â”‚
   â–¼
3. API Request (Axios)
   â”‚
   â”œâ”€ Add Authorization Header (if token exists)
   â”œâ”€ Set Content-Type
   â””â”€ Send Request
   â”‚
   â–¼
4. Backend Receives Request
   â”‚
   â”œâ”€ CORS Check
   â”œâ”€ Parse Request Body
   â””â”€ Validate with Pydantic
   â”‚
   â–¼
5. Authentication/Authorization
   â”‚
   â”œâ”€ Verify JWT Token (if protected route)
   â”œâ”€ Check User Permissions
   â””â”€ Validate Google Token (if OAuth)
   â”‚
   â–¼
6. Business Logic
   â”‚
   â”œâ”€ Query Database
   â”œâ”€ Process Data
   â””â”€ Generate Response
   â”‚
   â–¼
7. Send Response
   â”‚
   â”œâ”€ Status Code
   â”œâ”€ JSON Data
   â””â”€ Headers
   â”‚
   â–¼
8. Frontend Receives Response
   â”‚
   â”œâ”€ Check Status Code
   â”œâ”€ Parse JSON
   â””â”€ Update State
   â”‚
   â–¼
9. UI Update
   â”‚
   â”œâ”€ Re-render Components
   â”œâ”€ Show Success/Error
   â””â”€ Navigate (if needed)
```

This architecture ensures:
- âœ… Secure authentication
- âœ… Scalable design
- âœ… Clear separation of concerns
- âœ… Easy to maintain and extend
